<!--
  Generated template for the CalendarioPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="mui--bg-color-red-500 fg-light">

    <ion-navbar>
      <ion-title>Calendario</ion-title>

    </ion-navbar>
  
  </ion-header>


<ion-content padding>
  <!-- refresh-->
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-label no-padding no-margin text-center style="font-style: italic;
                      font-size: 0.9rem;">
    Deslize hacia abajo para actualizar
  </ion-label>
  <h1 text-center>{{viewTitle}}</h1>
  <ion-row>
      <ion-buttons end>
          <button ion-button small [disabled]="isToday" (click)="today()">Hoy</button>
          <button ion-button small (click)="changeMode('month')">Mensual</button>
          <button ion-button small (click)="changeMode('week')">Semanal</button>
          <button ion-button small (click)="changeMode('day')">Diario</button>
          <!-- comentado 
          <button ion-button (click)="loadEvents()">Load Events</button>-->
      </ion-buttons>
  </ion-row>
    <calendar 
              [monthviewEventDetailTemplate]="template"
              [eventSource]="eventSource"
              [calendarMode]="calendar.mode"
              [currentDate]="calendar.currentDate"
              [locale]="calendar.locale"
              (onCurrentDateChanged)="onCurrentDateChanged($event)"
              (onEventSelected)="onEventSelected($event)"
              (onTitleChanged)="onViewTitleChanged($event)"
              (onTimeSelected)="onTimeSelected($event)"
              step="30">
    </calendar>

    <ng-template #template let-showEventDetail="showEventDetail" let-selectedDate="selectedDate" let-noEventsLabel="noEventsLabel">
        <!--
        <h5 class="noEvents" *ngIf="selectedDate.events.length == 0">No Events</h5>
        -->
        <ion-list>
          <ion-item class="noEvents" *ngIf="selectedDate.events.length == 0">
            <ion-avatar item-start>
              <ion-icon name="calendar" item-start style="font-size: 2.5em;"></ion-icon>
            </ion-avatar>
            <h1 text-wrap>No hay eventos</h1>
          </ion-item>
        
        </ion-list>
        <ion-list>
          <ion-item (click)="onEventSelected(event)" *ngFor="let event of selectedDate.events">
              
              <ion-avatar item-start>
                <ion-icon name="calendar" item-start style="font-size: 2.5em;"></ion-icon>
              </ion-avatar>
                <h1 text-wrap>{{event.startTime | dateFormat: 'dddd DD'}}</h1>
                <h2 text-wrap>{{event.title}}</h2>
                <ion-badge>{{event.startTime | dateFormat: 'DD-MM-YYYY HH:mm'}} - {{event.endTime | dateFormat: 'DD-MM-YYYY HH:mm'}}</ion-badge>
              <!--
            <p text-wrap>Start: {{event.startTime}}</p>
            <p text-wrap>end: {{event.endTime}}</p>-->
          </ion-item>
        </ion-list>
    </ng-template>




</ion-content>
<ion-fab top right right>
<button ion-fab mini (click)="logout()" class="btn-color">
  <ion-icon name="close"></ion-icon>
</button>
</ion-fab>
